:macro offsetof ADDR {
	:calc a1 { 0xFF & ADDR >> 8 }
	:calc a2 { 0xFF & ADDR      }
	:byte a1
	:byte a2
}

: main
	hires
	plane 3

	objects_init
	render_screen

	va := 10
	vb := 10
	ninja_draw

: main_loop
		vd := 1
		ninja_process_input

		v0 := delay
		if v0 != 0 then
			jump main_loop

		v0 := 4
		delay := v0

		objects_tick
		ninja_tick
		ninja_action_finish

	jump main_loop
